<!DOCTYPE html>
<html>
<head>
    <title>Formulario editar</title>
</head>
<body>
    <h1>Forms de edicao de livro</h1>
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <p style="color: green;">{{ message }}</p>
        {% endfor %}
    </div>
    {% endif %}
    <form action="" method="post">
        {% csrf_token %}
        <input type="text" name="titulo" placeholder="Título" value="{{ livro.titulo }}" required>
        <input type="number" name="ano_publicacao" placeholder="Ano Publicação" value="{{ livro.ano_publicacao }}">
        <input type="text" name="preco" placeholder="Preço" value="{{ livro.preco }}">
        <input type="number" name="estoque" placeholder="Estoque" value="{{ livro.estoque }}">
        
        <!-- ✅ SELECT PARA EDITORA (com selected) -->
        <select name="id_editora">
            <option value="">Selecione uma editora</option>
            {% for editora in editoras %}
            <option value="{{ editora.id_editora }}" 
                {% if livro.id_editora and livro.id_editora.id_editora == editora.id_editora %}selected{% endif %}>
                {{ editora.nome_editora }}
            </option>
            {% endfor %}
        </select>
        
        <!-- ✅ SELECT PARA CATEGORIA (com selected) -->
        <select name="id_categoria">
            <option value="">Selecione uma categoria</option>
            {% for categoria in categorias %}
            <option value="{{ categoria.id_categoria }}"
                {% if livro.id_categoria and livro.id_categoria.id_categoria == categoria.id_categoria %}selected{% endif %}>
                {{ categoria.nome_categoria }}
            </option>
            {% endfor %}
        </select>
        
        <button type="submit">Atualizar Livro</button>
    </form>
</body>
</html>